var _ = require('lodash');

// non-xian
//var allIds = [2162, 2913, 2163, 2111, 3022, 2050, 2995, 3015, 2223, 2228, 2045, 2196, 2212, 5273, 2982, 3020, 2344, 5104, 2233, 3065, 2139, 2075, 3023, 2213, 2051, 2047, 3032, 5260, 2084, 2078, 2225, 5091, 2042, 2082, 2238, 2916, 2201, 2071, 2114, 3029, 2039, 4896, 3031, 2055, 5000, 2920, 5455, 3080, 2231, 2141, 5364, 2249, 2479, 2997, 2166, 2044, 2144, 2197, 2983, 2119, 2136, 2195, 2169, 3002, 2059, 3033, 2494, 2037, 2034, 2104, 2912, 2229, 2202, 2237, 2083, 2247, 2224, 3129, 2482, 2126, 2143, 2142, 2118, 2061, 2121, 2067, 2236, 5351, 2085, 2053, 2244, 3007, 2073, 2125, 2096, 2128, 3067, 2221, 3016, 2033, 2056, 2116, 3181, 2204, 2087, 2062, 2248, 3026, 2216, 3027, 2167, 2080, 4870, 2246, 3018, 2218, 2219, 2036, 2108, 2032, 3066, 2035, 2058, 3012, 2919, 2917, 2038, 2665, 2040, 2165, 2105, 2245, 2256, 3068, 2915, 3009, 2113, 3017, 2345, 2464, 2161, 2473, 2107, 3021, 5403, 5377, 5026, 3011, 2996, 2135, 2137, 2138, 2159, 2160, 4948, 5221, 3194, 4935, 3019, 2115, 2474, 2164, 2076, 2077, 2478, 2477, 3168, 5234, 2130, 2065, 2203, 2031, 2472, 2459, 2460, 2461, 2066, 2068, 2134, 2131, 2906, 2905, 2132, 2133, 2907, 3006, 3005, 2145, 2153, 2152, 2154, 2155, 2156, 2157, 2147, 2158, 2146, 2148, 2462, 2057, 2127, 2235];
// xian 1
var allIds = [3765, 3752, 2376, 3155, 2302, 2980, 2991, 2625, 3001, 2325, 3008, 4389, 2926, 2925, 2815, 2171, 2877, 2183, 4402, 2301]

function filterSchool(schools) {
  return _.filter(schools, function (school) {
    var id = school.school_id;
    return _.some(allIds, function (i) {
      return i == id;
    })
  });
};

function filterSchoolId(ids) {
  return _.intersection(ids, _.map(allIds, function (o) {
    return o + '';
  }));
}

console.log('target school count:', allIds.length);

module.exports = {
  filterSchool: filterSchool,
  filterSchoolId: filterSchoolId
};